<!DOCTYPE html><html lang="en"><head><title>webhook</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="webhook"><meta name="groc-project-path" content="lib/webhook.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">lib/webhook.js</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="cm">/**</span>
<span class="cm"> * Module dependencies.</span>
<span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">Resource</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;resource&#39;</span><span class="p">);</span>

<span class="cm">/**</span>
<span class="cm"> * Webhook constructor. This handles all calls</span>
<span class="cm"> * for webhooks.</span>
<span class="cm"> * Tacks in the following headers automatically:</span>
<span class="cm"> *</span>
<span class="cm"> * - Date</span>
<span class="cm"> * - Accept: application/json</span>
<span class="cm"> *</span>
<span class="cm"> * On data:</span>
<span class="cm"> * - Content-Type: application/json</span>
<span class="cm"> * - Content-Length</span>
<span class="cm"> * - Content-MD5</span>
<span class="cm"> *</span>
<span class="cm"> * @param {Nodejify} nodejify takes a nodejify object</span>
<span class="cm"> */</span>
<span class="kd">function</span> <span class="nx">Webhook</span><span class="p">(</span><span class="nx">nodejify</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// fix me: create a new connection class</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">connection</span> <span class="o">=</span> <span class="nx">nodejify</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Resource</span><span class="p">({</span>
        <span class="nx">url</span><span class="o">:</span> <span class="nx">nodejify</span><span class="p">.</span><span class="nx">baseUrl</span><span class="p">,</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/admin/webhooks.json&#39;</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="cm">/**</span>
<span class="cm"> *</span>
<span class="cm"> * @param queryParameters parameters available with:</span>
<span class="cm"> * - limit: Amount of results (default: 50) (maximum: 250)</span>
<span class="cm"> * - page: Page to show (default: 1)</span>
<span class="cm"> * - since_id: Restrict results to after the specified ID</span>
<span class="cm"> * - created_at_min: Show webhooks created after date (format: 2008-01-01 03:00)</span>
<span class="cm"> * - created_at_max: Show webhooks created before date (format: 2008-01-01 03:00)</span>
<span class="cm"> * - updated_at_min: Show webhooks last updated after date (format: 2008-01-01 03:00)</span>
<span class="cm"> * - updated_at_max: Show webhooks last updated before date (format: 2008-01-01 03:00)</span>
<span class="cm"> * - topic: Show webhooks with a given topic. Available topics: orders/create, orders/updated, orders/paid, orders/cancelled, orders/fulfilled, app/uninstalled, customer_groups/create, customer_groups/update, customer_groups/delete, products/create, products/update, products/delete, collections/create, collections/update, collections/delete, carts/create, carts/update</span>
<span class="cm"> * - address: Show webhooks with a given address</span>
<span class="cm"> * - fields: comma-separated list of fields to include in the response</span>
<span class="cm"> *</span>
<span class="cm"> * @param callback function to call upon response from server</span>
<span class="cm"> */</span>
<span class="nx">Webhook</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">get</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">queryParameters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">queryParameters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Webhook</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">put</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">queryParameters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">Webhook</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">post</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="nx">queryParameters</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Webhook</span><span class="p">;</span></div></div></div></div></body></html>